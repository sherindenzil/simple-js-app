var pokemonRepository = (function() {
  var t = [],
    e = "https://pokeapi.co/api/v2/pokemon/?limit=20";
  function o(e) {
    "object" == typeof e && "name" in e && "detailsUrl" in e && t.push(e);
  }
  function n(t) {
    var e = $(".modal-body"),
      o = $(".modal-title");
    o.empty(), e.empty();
    var n = $("<h1>" + t.name + "</h1>"),
      a = $('<img class="modal-img">');
    a.attr("src", t.imageUrl);
    var i = $("<p>height : " + t.height + "</p>"),
      r = $("<p>weight : " + t.weight + "</p>");
    o.append(n), e.append(a), e.append(i), e.append(r);
  }
  return {
    add: o,
    getAll: function() {
      return t;
    },
    addListItem: function(t) {
      pokemonRepository.loadDetails(t).then(function() {
        var e = $(".row"),
          o = $('<div class="card" style="width:400px"></div>'),
          a = $('<div class="card-body"></div>'),
          i = $("<h4 class='card-title' >" + t.name + "</h4>"),
          r = $(
            '<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">See Profile</button>'
          );
        e.append(o),
          o.append(a),
          a.append(i),
          a.append(r),
          r.on("click", function(e) {
            var o;
            (o = t),
              pokemonRepository.loadDetails(o).then(function() {
                console.log(o), n(o);
              });
          });
      });
    },
    loadList: function() {
      return $.ajax(e)
        .then(function(t) {
          t.results.forEach(function(t) {
            var e = { name: t.name, detailsUrl: t.url };
            o(e), console.log(e);
          });
        })
        .catch(function(t) {
          console.error(t);
        });
    },
    loadDetails: function(t) {
      var e = t.detailsUrl;
      return $.ajax(e)
        .then(function(e) {
          (t.imageUrl = e.sprites.front_default),
            (t.height = e.height),
            (t.weight = e.weight),
            (t.types = Object.keys(e.types));
        })
        .catch(function(t) {
          console.error(t);
        });
    },
    showModal: n
  };
})();
pokemonRepository.loadList().then(function() {
  pokemonRepository.getAll().forEach(function(t) {
    pokemonRepository.addListItem(t);
  });
});
